# WVOID-FM

A 24/7 AI-powered internet radio station. AI writes the DJ scripts, TTS speaks them, and the stream runs forever.

## What is this?

WVOID-FM is an experimental radio station where:
- Music is curated by time of day and weekly schedule (15 different shows)
- A mysterious DJ called "The Liminal Operator" speaks between tracks
- DJ scripts are generated by AI (Claude CLI or Gemini CLI)
- Speech is rendered by Kokoro TTS (fast) or Chatterbox (voice cloning)
- The whole thing runs 24/7 with automated content generation

Fork this to create your own AI radio station with your own music, voice, and personality.

## Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                         Your Machine                         │
├─────────────────────────────────────────────────────────────┤
│  stream_gapless.py                                          │
│    ├── Picks music by show/time (energy, warmth, genre)     │
│    ├── Inserts DJ segments between tracks                   │
│    ├── Pipes gapless PCM audio to ffmpeg encoder            │
│    └── Streams to Icecast                                   │
├─────────────────────────────────────────────────────────────┤
│  Icecast :8000 ──► (optional tunnel) ──► public URL         │
│  API :8001 ────────────────────────► now-playing endpoint   │
├─────────────────────────────────────────────────────────────┤
│  content_generator/                                         │
│    ├── batch_schedule_generator.py  (Gemini + Kokoro)       │
│    ├── headless_dj_generator.py     (Claude + Chatterbox)   │
│    └── persona.py                   (station identity)      │
└─────────────────────────────────────────────────────────────┘
```

## Quick Start

### 1. Install dependencies

```bash
# Install uv (Python package manager)
curl -LsSf https://astral.sh/uv/install.sh | sh

# Install system dependencies (macOS)
brew install icecast ffmpeg

# Set up Python environment
uv sync
```

### 2. Set up TTS

You have two options:

**Option A: Kokoro (recommended - fast, no GPU required)**
```bash
cd mac/kokoro
uv venv
uv pip install kokoro soundfile
# Downloads ~200MB model on first run
```

**Option B: Chatterbox (voice cloning, requires GPU/MPS)**
```bash
cd mac/chatterbox
uv venv --python 3.11
uv pip install chatterbox-tts torch torchaudio
# Downloads ~4GB model on first run
# Add a voice sample: cp your_voice.wav ../voice_reference/operator_voice.wav
```

### 3. Configure

```bash
# Copy example configs
cp config/icecast.xml.example config/icecast.xml
cp mac/config.yaml.example mac/config.yaml

# Edit mac/config.yaml:
# - Add your music directories
# - Set Icecast password (must match icecast.xml)
```

### 4. Add music

Put your audio files (mp3, flac, m4a, wav) in directories listed in `mac/config.yaml`. The streamer indexes them by energy/genre for smart selection.

### 5. Start streaming

```bash
# Start Icecast
brew services start icecast

# Start the streamer (runs forever)
cd mac
uv run python stream_gapless.py

# In another terminal, start the API server (optional)
uv run python now_playing_server.py
```

### 6. Generate DJ segments

**Using Gemini + Kokoro (fast, batch-friendly):**
```bash
cd mac/content_generator
uv run python batch_schedule_generator.py --count 20
```

**Using Claude + Chatterbox (voice cloning):**
```bash
cd mac/content_generator
uv run python headless_dj_generator.py --count 20
```

## Weekly Schedule

The station runs 15 different shows with distinct personalities, music selections, and voices. See `config/schedule.yaml` and `SCHEDULE.md` for details.

**Daily base schedule:**
- 00:00-06:00 — Overnight Drift (ambient, jazz)
- 06:00-10:00 — Sunrise Drift (gentle wakeup)
- 10:00-14:00 — Midday Mosaic (varied)
- 14:00-15:00 — The Talk Hour (more DJ, less music)
- 15:00-18:00 — Peak Signal (high energy)
- 18:00-21:00 — Golden Hour (warm sunset vibes)
- 21:00-00:00 — Night Transmission (contemplative)

**Weekly specials:**
- Monday 20:00 — Jazz Archives
- Tuesday 20:00 — World Circuit
- Wednesday 20:00 — Electric Drift
- Thursday 20:00 — Memory Lane (rock/indie)
- Friday 22:00-02:00 — Club Liminal
- Saturday 12:00 — Saturday Soul Service
- Sunday 10:00 — Slow Sunday
- Sunday 18:00 — Listener Mailbag

## Segment Types

The DJ generates various segment types:

- `station_id` — Short station identification
- `hour_marker` — Acknowledges the current hour
- `song_intro` — Transitions between songs
- `dedication` — Dedicates songs to abstract concepts
- `weather` — Existential weather reports
- `monologue` — 1-2 minute philosophical rambles
- `music_history` — Deep cuts about artists/genres
- `late_night_thoughts` — Stream of consciousness
- `listener_response` — Responses to listener messages

## Customizing Your Station

### Change the personality

Edit `mac/content_generator/persona.py` to define your station's identity, DJ name, and speaking style.

### Modify the schedule

Edit `config/schedule.yaml` to:
- Add/remove shows
- Change time slots
- Adjust music selection parameters (energy, warmth, genres)
- Assign different TTS voices to different shows

### Use different TTS voices

Kokoro includes 28 voices (see `mac/kokoro/tts.py`):
- American: `am_michael`, `af_heart`, `am_fenrir`...
- British: `bf_emma`, `bm_daniel`...

Assign voices per-show in `config/schedule.yaml`.

## Automated Operation

For hands-off operation, the operator script runs maintenance:

```bash
./run_operator.sh
```

Or via cron:
```
0 */2 * * * cd /path/to/wvoid-fm && ./run_operator.sh
```

This checks stream health, generates new segments when running low, and logs status.

## Files

```
├── mac/
│   ├── stream_gapless.py      # Main streamer
│   ├── schedule.py            # Weekly schedule parser
│   ├── now_playing_server.py  # API server
│   ├── play_history.py        # Track history/dedup
│   ├── discogs_lookup.py      # Album art + QR codes
│   ├── qr_generator.py        # Discogs QR for now-playing
│   ├── watchdog.py            # Process monitor
│   ├── operator_prompt.md     # Automated maintenance prompt
│   ├── chatterbox/            # Chatterbox TTS wrapper
│   ├── kokoro/                # Kokoro TTS wrapper
│   ├── content_generator/
│   │   ├── batch_schedule_generator.py  # Gemini + Kokoro
│   │   ├── headless_dj_generator.py     # Claude + Chatterbox
│   │   ├── persona.py                   # Station identity
│   │   └── helpers.py                   # Shared utilities
│   └── voice_reference/       # Voice samples for cloning
├── config/
│   ├── schedule.yaml          # Weekly show schedule
│   └── icecast.xml.example    # Icecast template
├── output/
│   ├── segments/              # Generated DJ audio (by period)
│   └── scripts/               # Script metadata
└── run_operator.sh            # Operator launcher
```

## Requirements

- Python 3.11+
- ffmpeg
- Icecast2
- Claude CLI or Gemini CLI (for script generation)
- ~200MB for Kokoro TTS, ~4GB for Chatterbox
- Apple Silicon recommended for Chatterbox (uses MPS acceleration)

## License

MIT
